<!DOCTYPE html>
<html>
<head>
    <title>{{ recipe['title'] }}</title>
</head>
<body>
    <h1>{{ recipe['title'] }}</h1>

    <h3>Ingredients</h3>
    <p>{{ recipe['ingredients'] }}</p>

    <h3>Steps</h3>
    <p>{{ recipe['steps'] }}</p>

    <h3>Tags</h3>
    <p>{{ recipe['tags'] }}</p>

    {% if recipe['forked_from'] %}
    <p>Forked from <a href="{{ url_for('view_recipe', recipe_id=recipe['forked_from']) }}">original recipe</a></p>
    {% endif %}

{% if user and recipe['user_id'] == user['id'] %}
    <a href="{{ url_for('edit_recipe', recipe_id=recipe['id']) }}">✏️ Edit this recipe</a>
    
    <form action="{{ url_for('delete_recipe', recipe_id=recipe['id']) }}" method="POST" style="display:inline;">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this recipe?')">🗑️ Delete</button>
    </form>
    {% else %}
        <form action="{{ url_for('fork_recipe', recipe_id=recipe['id']) }}" method="POST" style="display:inline;">
        <button type="submit">🍴 Fork this recipe</button>
        </form>

{% endif %}

{% if forks %}
    <h4>Forks</h4>
    <ul>
        {% for fork in forks %}
            <li><a href="{{ url_for('view_recipe', recipe_id=fork['id']) }}">{{ fork['title'] }}</a></li>
        {% endfor %}
    </ul>
{% endif %}

    <a href="{{ url_for('home') }}">Back to recipe list</a>
</body>
</html>
